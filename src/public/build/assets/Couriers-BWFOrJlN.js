import{G as k,r as U,$ as B,c as N,o as E,h as f,a as _,w as n,_ as j,a0 as A,b as d,d as l,e as D,g as I,i,m as M,f as y,E as h,I as m,J as b,v as O,s as t,x as g,F,y as z,z as r,k as v,a1 as G,j as H}from"./main-CrtOhUxB.js";import{_ as J}from"./CardBoxModal-DTCoNjvh.js";import{C as L}from"./Statuses-BSKbIDnF.js";const P={class:"table-auto w-full"},R={class:"text-sm divide-y divide-gray-100 dark:divide-gray-700/60"},T={class:"p-2 whitespace-nowrap"},W={class:"flex items-center"},q={class:"font-medium text-gray-800 dark:text-gray-100"},K={class:"p-2 whitespace-nowrap"},Q={class:"flex items-center"},X={class:"font-medium text-gray-800 dark:text-gray-100"},Y={class:"p-2 whitespace-nowrap"},Z={class:"text-left"},tt={class:"p-2 whitespace-nowrap"},et={class:"text-left font-medium text-green-500"},at={class:"text-left font-small flex space-x-2"},st={class:"p-2 whitespace-nowrap"},ot={class:"text-left"},dt={__name:"Couriers",setup(lt){const V=A(),c=k([]),C=Object.values(L),p=U(!1),e=k({name:null,status:null,uuid:null,phone:null}),w=B(),$=N(()=>{const o=[];for(const[s,a]of Object.entries(w.couriers))o.push({uuid:s,status:a});return o}),x=o=>{p.value=!0,e.name=o?.name,e.uuid=o?.uuid,e.status=o?.status,e.phone=o?.phone},S=()=>{const o=e.uuid?"/api/update-courier":"/api/create-courier",s={name:e.name,phone:e.phone};e.uuid&&(s.uuid=e.uuid,s.status=e.status),f.post(o,s).then(a=>{e.uuid?c.map(u=>(u.uuid===a.data.data.uuid&&(u.name=a.data.data.name,u.name=a.data.data.phone,u.status=a.data.data.status),u)):f.get("/api/couriers").then(u=>{c.push(...u.data.data)})}).finally(()=>{e.name=null,e.uuid=null,e.status=null,e.phone=null})};return E(()=>{f.get("/api/couriers").then(o=>{c.push(...o.data.data);for(const s of o.data.data)w.updateStatus({uuid:s.uuid,status:s.status})})}),(o,s)=>(d(),_(j,null,{default:n(()=>[l(D,null,{default:n(()=>[l(I,{icon:i(M),title:"Couriers",main:""},null,8,["icon"]),l(J,{modelValue:p.value,"onUpdate:modelValue":[s[4]||(s[4]=a=>p.value=a),S],title:e.uuid?"Edit courier":"Create courier","button-label":e.uuid?"Update":"Create","has-cancel":""},{default:n(()=>[l(h,{label:"Name"},{default:n(()=>[e.uuid?(d(),_(m,{key:0,modelValue:e.uuid,"onUpdate:modelValue":s[0]||(s[0]=a=>e.uuid=a),icon:i(b),"is-disabled":""},null,8,["modelValue","icon"])):y("",!0),l(m,{modelValue:e.name,"onUpdate:modelValue":s[1]||(s[1]=a=>e.name=a),icon:i(b)},null,8,["modelValue","icon"])]),_:1}),l(h,{label:"Phone"},{default:n(()=>[l(m,{modelValue:e.phone,"onUpdate:modelValue":s[2]||(s[2]=a=>e.phone=a),icon:i(b)},null,8,["modelValue","icon"])]),_:1}),e.uuid?(d(),_(h,{key:0,label:"Status"},{default:n(()=>[l(m,{modelValue:e.status,"onUpdate:modelValue":s[3]||(s[3]=a=>e.status=a),options:i(C)},null,8,["modelValue","options"])]),_:1})):y("",!0)]),_:1},8,["modelValue","title","button-label"]),l(O,{class:"mb-6","has-table":""},{footer:n(()=>[l(H,null,{default:n(()=>[l(v,{type:"button",color:"info",label:"Create",onClick:s[5]||(s[5]=a=>x(null))})]),_:1})]),default:n(()=>[t("table",P,[s[6]||(s[6]=t("thead",{class:"text-xs font-semibold uppercase dark:text-gray-500 bg-gray-50 dark:bg-gray-700 dark:bg-opacity-50"},[t("tr",null,[t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"#")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"UUID")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Name")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Status")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Action")]),t("th",{class:"p-2 whitespace-nowrap"},[t("div",{class:"font-semibold text-left"},"Date")])])],-1)),t("tbody",R,[(d(!0),g(F,null,z(c,a=>(d(),g("tr",{key:a.id},[t("td",T,[t("div",W,[t("div",q,r(a.id),1)])]),t("td",K,[t("div",Q,[t("div",X,r(a.uuid),1)])]),t("td",Y,[t("div",Z,r(a.name),1)]),t("td",tt,[t("div",et,r($.value.find(u=>u.uuid===a.uuid)?.status),1)]),t("div",at,[l(v,{type:"button",color:"success",label:"Edit courier",small:"",onClick:u=>x(a)},null,8,["onClick"]),l(v,{type:"button",icon:i(G),color:"info",small:"",title:"Working Hours",onClick:u=>i(V).push({name:"courier-working-hours",params:{courierId:a.id}})},null,8,["icon","onClick"])]),t("td",st,[t("div",ot,r(a.updated_at),1)])]))),128))])])]),_:1})]),_:1})]),_:1}))}};export{dt as default};
